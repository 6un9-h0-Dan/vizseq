---
id: ipynb_example
title: Jupyter Notebook Examples
sidebar_label: Jupyter Notebook Examples
---

#### Example Data
The following examples rely on example data which can be acquired by:
```bash
bash get_example_data.sh
```
The data will be available in `examples/data`.

#### APIs
VizSeq accepts various kinds of data sources: plain text file paths, ZIP file paths and Python dictionaries.
(See also the [data sources](data_sources) page for more details.)

Here is an example for plain text file paths as inputs:
```python
from glob import glob
root = 'examples/data/translation_wmt14_en_de_test'
src = glob('{}/src_*.txt'.format(root))
ref = glob('{}/ref_*.txt'.format(root))
hypo = glob('{}/pred_*.txt'.format(root))
```
An example for Python dictionaries as inputs:
```python
from typing import List, Dict
import os.path as op
from glob import glob

def reader(paths: List[str]) -> Dict[str, List[str]]:
    data = {}
    for path in paths:
        name = str(op.splitext(op.basename(path))[0]).split('_', 1)[1]
        with open(path) as f:
            data[name] = [l.strip() for l in f]
    return data

root = 'examples/data/translation_wmt14_en_de_test'
src = reader(glob('{}/src_*.txt'.format(root)))
ref = reader(glob('{}/ref_*.txt'.format(root)))
hypo = reader(glob('{}/pred_*.txt'.format(root)))
```
Import the `vizseq` package:
```python
import vizseq
```
Then we can view dataset statistics (# of examples, # of tokens, example length distributions, etc.):
```python
vizseq.view_stats(src, ref)
```
We can view corpus-level scores:
```python
vizseq.view_scores(ref, hypo, ['bleu', 'meteor’])
```
Ids of available scorers in VizSeq can be queried by:
```python
vizseq.available_scorers()
```

```
Available scorers: bert_score, bleu, bp, chrf, cider, gleu, laser, meteor, nist, ribes, rouge_1, rouge_2, rouge_l, ter, wer, wer_del, wer_ins, wer_sub
```
We can view examples in pages with sorting:
```python
import vizseq.VizSeqSortingType
vizseq.view_examples(src, ref, hypo, ['bleu'], page_sz=10, page_no=1, sorting=VizSeqSortingType.src_len)
```
We can view source-side n-grams:
```python
vizseq.view_n_grams(src)
```

#### Google Translate Integration
VizSeq integrates Google Translate using Google Cloud API, to use which you need a Google Cloud credential and let VizSeq know the credential JSON file path:
```python
vizseq.set_google_credential_path('path to google credential json file')
```
Then in example viewing API, simply switch the `need_g_translate` argument on:
```python
vizseq.view_examples(src, ref, hypo, ['bleu'], need_g_translate=True)
```

#### Fairseq Integration

[Fairseq](https://github.com/pytorch/fairseq) is a popular sequence modeling toolkit developed by Facebook AI Research.
VizSeq can directly import and analyze model predictions generated by `fairseq-generate` and `fairseq-interactive`. The
APIs are almost the same:

```python
from vizseq.ipynb import fairseq_viz as vizseq_fs

log_path = 'examples/data/wmt14_fr_en_test.fairseq_generate.log'

vizseq_fs.view_stats(log_path)
vizseq.view_examples(log_path, ['bleu', 'meteor'], need_g_translate=True)
vizseq.view_scores(log_path, ['bleu', 'meteor’])
vizseq.view_n_grams(log_path)
```
